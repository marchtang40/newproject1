const form = document.getElementById('login-form')
const phone = document.getElementById('phone')
const email = document.getElementById('email')
const countryCode = document.getElementById('country-code')
const password = document.getElementById('password')
const submit = document.getElementById('submit')
const toggle = document.getElementById('toggle-password')
const phoneError = document.querySelector('.error[data-for="phone"]')
const emailError = document.querySelector('.error[data-for="email"]')
const passwordError = document.querySelector('.error[data-for="password"]')
const modePhoneBtn = document.getElementById('mode-phone')
const modeEmailBtn = document.getElementById('mode-email')
const phoneField = document.querySelector('.phone-field')
const emailField = document.querySelector('.email-field')

function validatePassword(value){return typeof value==='string'&&value.length>=8}
function cleanDigits(v){return (v||'').replace(/\D+/g,'')}
function validateEmail(value){return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)}
const phoneRules={
  '+86':/^(1[3-9]\d{9})$/,
  '+1':/^[2-9]\d{9}$/,
  '+852':/^[5689]\d{7}$/,
  '+81':/^\d{10,11}$/,
  '+82':/^\d{9,10}$/,
  '+65':/^[689]\d{7}$/,
  '+44':/^\d{10}$/,
  '+49':/^\d{10,11}$/,
  '+33':/^\d{9}$/,
  '+91':/^[6-9]\d{9}$/,
  '+61':/^\d{9}$/
}
const dynamicRules={}
function validatePhone(cc,digits){const rule=dynamicRules[cc]||phoneRules[cc];return (rule?rule.test(digits):/^\d{4,15}$/.test(digits))}
let mode='phone'
function updateMode(next){mode=next;modePhoneBtn.classList.toggle('active',mode==='phone');modeEmailBtn.classList.toggle('active',mode==='email');if(mode==='phone'){phoneField.hidden=false;emailField.hidden=true}else{phoneField.hidden=true;emailField.hidden=false}showErrors();updateButtonState()}
function updateButtonState(){let ok=false;if(mode==='phone'){const digits=cleanDigits(phone.value);ok=validatePhone(countryCode.value,digits)}else{ok=validateEmail(email.value)}ok=ok&&validatePassword(password.value);submit.disabled=!ok}
function showErrors(){if(mode==='phone'){const digits=cleanDigits(phone.value);phoneError.textContent=digits&& !validatePhone(countryCode.value,digits)?'è¯·è¾“å…¥æœ‰æ•ˆæ‰‹æœºå·':'';emailError.textContent=''}else{emailError.textContent=email.value&& !validateEmail(email.value)?'è¯·è¾“å…¥æœ‰æ•ˆé‚®ç®±':'';phoneError.textContent=''}passwordError.textContent=password.value&& !validatePassword(password.value)?'è‡³å°‘ 8 ä½å­—ç¬¦':''}

phone.addEventListener('input',()=>{const v=cleanDigits(phone.value);if(phone.value!==v)phone.value=v;updateButtonState();showErrors()})
email.addEventListener('input',()=>{updateButtonState();showErrors()})
countryCode.addEventListener('change',()=>{updateButtonState();showErrors()})
password.addEventListener('input',()=>{updateButtonState();showErrors()})
toggle.addEventListener('click',()=>{const t=password.getAttribute('type')==='password'?'text':'password';password.setAttribute('type',t)})
modePhoneBtn.addEventListener('click',()=>updateMode('phone'))
modeEmailBtn.addEventListener('click',()=>updateMode('email'))

form.addEventListener('submit',(e)=>{e.preventDefault();updateButtonState();showErrors();if(submit.disabled)return;let data;if(mode==='phone'){const digits=cleanDigits(phone.value);data={mode:'phone',countryCode:countryCode.value,phone:digits,fullPhone:`${countryCode.value}${digits}`,password:password.value,remember:document.getElementById('remember').checked}}else{data={mode:'email',email:email.value,password:password.value,remember:document.getElementById('remember').checked}};console.log('login',data);submit.disabled=true;submit.textContent='ç™»å½•ä¸­â€¦';setTimeout(()=>{submit.disabled=false;submit.textContent='ç™»å½•';alert('å·²æäº¤æ¼”ç¤ºæ•°æ®');},800)})


function populateFromJson(list){
  const prev=countryCode.value
  const items=(Array.isArray(list)?list:[]).map(it=>({code:(it.dial_code||'').toString().replace(/^\++/,'+'),name:it.name||it.name_zh||it.en||it.name_en||''})).filter(it=>it.code&&it.code!=='+' )
  const map=new Map()
  items.forEach(it=>{if(!map.has(it.code))map.set(it.code,it.name)})
  const pinned=['+86','+852','+853','+886','+1','+81','+82','+65','+44','+49','+33','+91','+61']
  const pinnedItems=pinned.filter(c=>map.has(c)).map(c=>({code:c,name:map.get(c)}))
  const others=[]
  map.forEach((name,code)=>{if(!pinned.includes(code))others.push({code,name})})
  others.sort((a,b)=>{const ac=parseInt(a.code.replace('+',''));const bc=parseInt(b.code.replace('+',''));return ac-bc||a.name.localeCompare(b.name)})
  // 1. åˆå§‹åŒ–é€‰ä¸­
  if(prev && items.some(it=>it.code===prev)){countryCode.value=prev}
  if(!countryCode.value){countryCode.value='+86'}

  // --- åˆå§‹åŒ–è‡ªå®šä¹‰ä¸‹æ‹‰æ¡†é€»è¾‘ ---
  const container = document.getElementById('custom-country-select');
  const trigger = container.querySelector('.select-trigger');
  const triggerText = container.querySelector('.trigger-text');
  const dropdown = container.querySelector('.select-dropdown');
  const searchInput = container.querySelector('.search-input');
  const optionsList = container.querySelector('.options-list');
  const hiddenInput = document.getElementById('country-code'); // ä¸åŸç”Ÿselect IDä¿æŒä¸€è‡´ä»¥ä¾¿é€»è¾‘å¤ç”¨

  // æ¸²æŸ“åˆ—è¡¨å‡½æ•°
  const renderList = (filterText = '') => {
    optionsList.innerHTML = '';
    const filter = filterText.toLowerCase();
    
    // è¿‡æ»¤æ•°æ®
    const filterGroup = (list) => list.filter(item => {
      return item.code.includes(filter) || item.name.toLowerCase().includes(filter);
    });

    const filteredPinned = filterGroup(pinnedItems);
    const filteredOthers = filterGroup(others);

    if (filteredPinned.length > 0) {
      const label = document.createElement('div');
      label.className = 'option-group-label';
      label.textContent = 'å¸¸ç”¨';
      optionsList.appendChild(label);
      filteredPinned.forEach(item => optionsList.appendChild(createOption(item)));
    }

    if (filteredOthers.length > 0) {
      const label = document.createElement('div');
      label.className = 'option-group-label';
      label.textContent = 'å…¨éƒ¨å›½å®¶';
      optionsList.appendChild(label);
      filteredOthers.forEach(item => optionsList.appendChild(createOption(item)));
    }
    
    if (filteredPinned.length === 0 && filteredOthers.length === 0) {
      const empty = document.createElement('div');
      empty.className = 'option-item';
      empty.textContent = 'æ— åŒ¹é…ç»“æœ';
      empty.style.color = 'var(--muted)';
      empty.style.justifyContent = 'center';
      optionsList.appendChild(empty);
    }
  };

  const createOption = (item) => {
    const div = document.createElement('div');
    div.className = `option-item ${item.code === hiddenInput.value ? 'selected' : ''}`;
    div.dataset.value = item.code;
    div.dataset.name = item.name;
    div.innerHTML = `
      <span class="option-code">${item.code}</span>
      <span class="option-name">${item.name}</span>
    `;
    div.addEventListener('click', () => selectItem(item));
    return div;
  };

  const selectItem = (item) => {
    hiddenInput.value = item.code;
    triggerText.textContent = item.code;
    closeDropdown();
    // è§¦å‘changeäº‹ä»¶ä»¥å…¼å®¹å·²æœ‰æ ¡éªŒé€»è¾‘
    const event = new Event('change');
    hiddenInput.dispatchEvent(event);
  };

  const openDropdown = () => {
    dropdown.hidden = false;
    trigger.setAttribute('aria-expanded', 'true');
    renderList(''); // é‡ç½®åˆ—è¡¨
    searchInput.value = '';
    searchInput.focus();
    // é«˜äº®å½“å‰é€‰ä¸­
    const selected = optionsList.querySelector('.selected');
    if(selected) selected.scrollIntoView({block: 'center'});
  };

  const closeDropdown = () => {
    dropdown.hidden = true;
    trigger.setAttribute('aria-expanded', 'false');
  };

  // äº‹ä»¶ç»‘å®š
  trigger.addEventListener('click', (e) => {
    e.stopPropagation();
    dropdown.hidden ? openDropdown() : closeDropdown();
  });

  searchInput.addEventListener('input', (e) => {
    renderList(e.target.value);
  });
  
  // ç‚¹å‡»å¤–éƒ¨å…³é—­
  document.addEventListener('click', (e) => {
    if (!container.contains(e.target)) closeDropdown();
  });

  // åˆå§‹åŒ–æ˜¾ç¤º
  triggerText.textContent = hiddenInput.value;
}
function initDialCodes(){if(window.DIAL_CODES&&Array.isArray(window.DIAL_CODES)&&window.DIAL_CODES.length){populateFromJson(window.DIAL_CODES)}else{populateCountries()}}

initDialCodes()
updateMode('phone')

// --- æ³¨å†Œé¡µé¢é€»è¾‘ ---
const loginCard = document.getElementById('login-card');
const registerCard = document.getElementById('register-card');
const goToRegisterBtn = document.getElementById('go-to-register');
const cancelRegisterBtn = document.getElementById('cancel-register');

// åˆ‡æ¢è§†å›¾
goToRegisterBtn.addEventListener('click', (e) => {
  e.preventDefault();
  loginCard.hidden = true;
  registerCard.hidden = false;
});

cancelRegisterBtn.addEventListener('click', () => {
  registerCard.hidden = true;
  loginCard.hidden = false;
});

// æ³¨å†Œè¡¨å•æ ¡éªŒ
const regForm = document.getElementById('register-form');
const regEmail = document.getElementById('reg-email');
const regCode = document.getElementById('reg-code');
const regPass = document.getElementById('reg-password');
const regRePass = document.getElementById('reg-repassword');
const agreeTerms = document.getElementById('agree-terms');
const regSubmit = document.getElementById('register-submit');
const sendCodeBtn = document.getElementById('send-code-btn');
const togglePassBtns = document.querySelectorAll('.toggle-password-btn');

function validateRegForm() {
  const isEmailValid = validateEmail(regEmail.value);
  const isCodeValid = regCode.value.length === 6;
  const isPassValid = validatePassword(regPass.value);
  const isRePassValid = regRePass.value === regPass.value && isPassValid;
  const isTermsChecked = agreeTerms.checked;
  const isNicknameValid = document.getElementById('reg-nickname').value.trim().length > 0;
  
  // å®æ—¶æ˜¾ç¤ºé”™è¯¯æç¤º
  document.querySelector('.error[data-for="reg-email"]').textContent = regEmail.value && !isEmailValid ? 'è¯·è¾“å…¥æœ‰æ•ˆé‚®ç®±' : '';
  document.querySelector('.error[data-for="code"]').textContent = regCode.value && !isCodeValid ? 'éªŒè¯ç éœ€ä¸º6ä½' : '';
  document.querySelector('.error[data-for="reg-password"]').textContent = regPass.value && !isPassValid ? 'å¯†ç è‡³å°‘8ä½' : '';
  document.querySelector('.error[data-for="repassword"]').textContent = regRePass.value && regRePass.value !== regPass.value ? 'ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´' : '';
  document.querySelector('.error[data-for="nickname"]').textContent = document.getElementById('reg-nickname').value && !isNicknameValid ? 'æ˜µç§°ä¸èƒ½ä¸ºç©º' : '';

  regSubmit.disabled = !(isEmailValid && isCodeValid && isPassValid && isRePassValid && isTermsChecked && isNicknameValid);
}

// å®æ—¶æ ¡éªŒäº‹ä»¶
[regEmail, regCode, regPass, regRePass, document.getElementById('reg-nickname')].forEach(input => {
  input.addEventListener('input', validateRegForm);
});
agreeTerms.addEventListener('change', validateRegForm);

// å‘é€éªŒè¯ç å€’è®¡æ—¶
let countdown = 0;
sendCodeBtn.addEventListener('click', () => {
  if (countdown > 0) return;
  if (!validateEmail(regEmail.value)) {
    alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€');
    return;
  }
  
  // æ¨¡æ‹Ÿå‘é€
  alert(`éªŒè¯ç å·²å‘é€è‡³ ${regEmail.value}\nï¼ˆæµ‹è¯•éªŒè¯ç ï¼š123456ï¼‰`);
  countdown = 60;
  sendCodeBtn.disabled = true;
  sendCodeBtn.textContent = `${countdown}s`;
  
  const timer = setInterval(() => {
    countdown--;
    if (countdown <= 0) {
      clearInterval(timer);
      sendCodeBtn.disabled = false;
      sendCodeBtn.textContent = 'è·å–éªŒè¯ç ';
    } else {
      sendCodeBtn.textContent = `${countdown}s`;
    }
  }, 1000);
});

// å¯†ç æ˜¾éšåˆ‡æ¢
togglePassBtns.forEach(btn => {
  btn.addEventListener('click', () => {
    const input = btn.previousElementSibling;
    const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
    input.setAttribute('type', type);
  });
});

// æ³¨å†Œæäº¤
regForm.addEventListener('submit', (e) => {
  e.preventDefault();
  if (regSubmit.disabled) return;
  
  const data = {
    nickname: document.getElementById('reg-nickname').value,
    email: regEmail.value,
    code: regCode.value,
    password: regPass.value,
    timestamp: new Date().toISOString()
  };

  // 1. éªŒè¯ç æ ¡éªŒ
  if (data.code !== '123456') {
    alert('éªŒè¯ç é”™è¯¯ï¼Œè¯·è¾“å…¥ 123456');
    return;
  }
  
  // 2. å­˜å‚¨æ³¨å†Œæ•°æ® (localStorage)
  try {
    const existingUsers = JSON.parse(localStorage.getItem('registered_users') || '[]');
    // æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨
    if (existingUsers.some(u => u.email === data.email)) {
      alert('è¯¥é‚®ç®±å·²è¢«æ³¨å†Œ');
      return;
    }
    
    // å­˜å‚¨é™¤äº†éªŒè¯ç ä¹‹å¤–çš„ä¿¡æ¯
    const userData = {
      nickname: data.nickname,
      email: data.email,
      password: data.password, // å®é™…é¡¹ç›®ä¸­ä¸åº”æ˜æ–‡å­˜å‚¨
      timestamp: data.timestamp
    };
    
    existingUsers.push(userData);
    localStorage.setItem('registered_users', JSON.stringify(existingUsers));
    
    // æ–¹ä¾¿è°ƒè¯•ï¼Œæ‰“å°æ‰€æœ‰ç”¨æˆ·
    console.log('å½“å‰å·²æ³¨å†Œç”¨æˆ·:', existingUsers);
  } catch (err) {
    console.error('å­˜å‚¨å¤±è´¥', err);
    alert('æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•');
    return;
  }
  
  console.log('register success', data);
  regSubmit.disabled = true;
  regSubmit.textContent = 'æ³¨å†Œä¸­...';
  
  setTimeout(() => {
    regSubmit.disabled = false;
    regSubmit.textContent = 'æ³¨å†Œ';
    alert(`æ³¨å†ŒæˆåŠŸï¼\næ˜µç§°: ${data.nickname}\né‚®ç®±: ${data.email}\nè¯·ç™»å½•`);
    
    // è‡ªåŠ¨å¡«å……ç™»å½•é‚®ç®±
    updateMode('email');
    email.value = data.email;
    
    // åˆ‡æ¢å›ç™»å½•é¡µ
    registerCard.hidden = true;
    loginCard.hidden = false;
    
    // é‡ç½®æ³¨å†Œè¡¨å•
    regForm.reset();
  }, 1000);
});

// æš´éœ²ä¸€ä¸ªå…¨å±€å‡½æ•°ç”¨äºæŸ¥è¯¢ç”¨æˆ·æ•°æ® (æ§åˆ¶å°è°ƒè¯•ç”¨)
window.queryUsers = () => {
  const users = JSON.parse(localStorage.getItem('registered_users') || '[]');
  console.table(users);
  return users;
};

// ç»‘å®šè°ƒè¯•æŒ‰é’®äº‹ä»¶
const debugBtn = document.getElementById('debug-users-btn');
if (debugBtn) {
  debugBtn.addEventListener('click', () => {
    const users = window.queryUsers();
    if (users.length === 0) {
      alert('æš‚æ— æ³¨å†Œç”¨æˆ·');
    } else {
      const msg = users.map((u, i) => `${i + 1}. ${u.nickname} (${u.email})`).join('\n');
      alert(`å·²æ³¨å†Œç”¨æˆ· (${users.length}äºº):\n${msg}\n\nè¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹æ§åˆ¶å° (F12 -> Console)`);
    }
  });
}


window.DIAL_CODES = [
  {"name": "ä¸­å›½", "en": "China", "code": "CN", "dial_code": "+86"},
  {"name": "ä¸­å›½é¦™æ¸¯", "en": "Hong Kong", "code": "HK", "dial_code": "+852"},
  {"name": "ä¸­å›½æ¾³é—¨", "en": "Macao", "code": "MO", "dial_code": "+853"},
  {"name": "ä¸­å›½å°æ¹¾", "en": "Taiwan", "code": "TW", "dial_code": "+886"},
  {"name": "ç¾å›½", "en": "United States", "code": "US", "dial_code": "+1"},
  {"name": "é˜¿å°”å·´å°¼äºš", "en": "Albania", "code": "AL", "dial_code": "+355"},
  {"name": "é˜¿å°”åŠåˆ©äºš", "en": "Algeria", "code": "DZ", "dial_code": "+213"},
  {"name": "é˜¿å¯Œæ±—", "en": "Afghanistan", "code": "AF", "dial_code": "+93"},
  {"name": "é˜¿æ ¹å»·", "en": "Argentina", "code": "AR", "dial_code": "+54"},
  {"name": "é˜¿æ‹‰ä¼¯è”åˆé…‹é•¿å›½", "en": "United Arab Emirates", "code": "AE", "dial_code": "+971"},
  {"name": "é˜¿é²å·´", "en": "Aruba", "code": "AW", "dial_code": "+297"},
  {"name": "é˜¿æ›¼", "en": "Oman", "code": "OM", "dial_code": "+968"},
  {"name": "é˜¿å¡æ‹œç–†", "en": "Azerbaijan", "code": "AZ", "dial_code": "+994"},
  {"name": "åŸƒåŠ", "en": "Egypt", "code": "EG", "dial_code": "+20"},
  {"name": "åŸƒå¡ä¿„æ¯”äºš", "en": "Ethiopia", "code": "ET", "dial_code": "+251"},
  {"name": "çˆ±å°”å…°", "en": "Ireland", "code": "IE", "dial_code": "+353"},
  {"name": "çˆ±æ²™å°¼äºš", "en": "Estonia", "code": "EE", "dial_code": "+372"},
  {"name": "å®‰é“å°”", "en": "Andorra", "code": "AD", "dial_code": "+376"},
  {"name": "å®‰å“¥æ‹‰", "en": "Angola", "code": "AO", "dial_code": "+244"},
  {"name": "å®‰åœ­æ‹‰", "en": "Anguilla", "code": "AI", "dial_code": "+1264"},
  {"name": "å®‰æç“œå’Œå·´å¸ƒè¾¾", "en": "Antigua and Barbuda", "code": "AG", "dial_code": "+1268"},
  {"name": "å¥¥åœ°åˆ©", "en": "Austria", "code": "AT", "dial_code": "+43"},
  {"name": "æ¾³å¤§åˆ©äºš", "en": "Australia", "code": "AU", "dial_code": "+61"},
  {"name": "å·´å·´å¤šæ–¯", "en": "Barbados", "code": "BB", "dial_code": "+1246"},
  {"name": "å·´å¸ƒäºšæ–°å‡ å†…äºš", "en": "Papua New Guinea", "code": "PG", "dial_code": "+675"},
  {"name": "å·´å“ˆé©¬", "en": "Bahamas", "code": "BS", "dial_code": "+1242"},
  {"name": "å·´åŸºæ–¯å¦", "en": "Pakistan", "code": "PK", "dial_code": "+92"},
  {"name": "å·´æ‹‰åœ­", "en": "Paraguay", "code": "PY", "dial_code": "+595"},
  {"name": "å·´æ—", "en": "Bahrain", "code": "BH", "dial_code": "+973"},
  {"name": "å·´æ‹¿é©¬", "en": "Panama", "code": "PA", "dial_code": "+507"},
  {"name": "å·´è¥¿", "en": "Brazil", "code": "BR", "dial_code": "+55"},
  {"name": "ç™½ä¿„ç½—æ–¯", "en": "Belarus", "code": "BY", "dial_code": "+375"},
  {"name": "ç™¾æ…•å¤§", "en": "Bermuda", "code": "BM", "dial_code": "+1441"},
  {"name": "ä¿åŠ åˆ©äºš", "en": "Bulgaria", "code": "BG", "dial_code": "+359"},
  {"name": "è´å®", "en": "Benin", "code": "BJ", "dial_code": "+229"},
  {"name": "æ¯”åˆ©æ—¶", "en": "Belgium", "code": "BE", "dial_code": "+32"},
  {"name": "ç§˜é²", "en": "Peru", "code": "PE", "dial_code": "+51"},
  {"name": "æ³¢å¤šé»å„", "en": "Puerto Rico", "code": "PR", "dial_code": "+1787"},
  {"name": "æ³¢å…°", "en": "Poland", "code": "PL", "dial_code": "+48"},
  {"name": "æ³¢æ–¯å°¼äºšå’Œé»‘å¡å“¥ç»´é‚£", "en": "Bosnia and Herzegovina", "code": "BA", "dial_code": "+387"},
  {"name": "ç»åˆ©ç»´äºš", "en": "Bolivia", "code": "BO", "dial_code": "+591"},
  {"name": "ä¼¯åˆ©å…¹", "en": "Belize", "code": "BZ", "dial_code": "+501"},
  {"name": "åšèŒ¨ç“¦çº³", "en": "Botswana", "code": "BW", "dial_code": "+267"},
  {"name": "ä¸ä¸¹", "en": "Bhutan", "code": "BT", "dial_code": "+975"},
  {"name": "å¸ƒåŸºçº³æ³•ç´¢", "en": "Burkina Faso", "code": "BF", "dial_code": "+226"},
  {"name": "å¸ƒéš†è¿ª", "en": "Burundi", "code": "BI", "dial_code": "+257"},
  {"name": "èµ¤é“å‡ å†…äºš", "en": "Equatorial Guinea", "code": "GQ", "dial_code": "+240"},
  {"name": "ä¸¹éº¦", "en": "Denmark", "code": "DK", "dial_code": "+45"},
  {"name": "å¾·å›½", "en": "Germany", "code": "DE", "dial_code": "+49"},
  {"name": "ä¸œå¸æ±¶", "en": "East Timor", "code": "TL", "dial_code": "+670"},
  {"name": "å¤šå“¥", "en": "Togo", "code": "TG", "dial_code": "+228"},
  {"name": "å¤šç±³å°¼åŠ å…±å’Œå›½", "en": "Dominican Republic", "code": "DO", "dial_code": "+1809"},
  {"name": "å¤šç±³å°¼å…‹", "en": "Dominica", "code": "DM", "dial_code": "+1767"},
  {"name": "ä¿„ç½—æ–¯", "en": "Russia", "code": "RU", "dial_code": "+7"},
  {"name": "å„ç“œå¤šå°”", "en": "Ecuador", "code": "EC", "dial_code": "+593"},
  {"name": "å„ç«‹ç‰¹é‡Œäºš", "en": "Eritrea", "code": "ER", "dial_code": "+291"},
  {"name": "æ³•å›½", "en": "France", "code": "FR", "dial_code": "+33"},
  {"name": "æ³•ç½—ç¾¤å²›", "en": "Faroe Islands", "code": "FO", "dial_code": "+298"},
  {"name": "æ³•å±æ³¢åˆ©å°¼è¥¿äºš", "en": "French Polynesia", "code": "PF", "dial_code": "+689"},
  {"name": "è²å¾‹å®¾", "en": "Philippines", "code": "PH", "dial_code": "+63"},
  {"name": "æ–æµ", "en": "Fiji", "code": "FJ", "dial_code": "+679"},
  {"name": "èŠ¬å…°", "en": "Finland", "code": "FI", "dial_code": "+358"},
  {"name": "ä½›å¾—è§’", "en": "Cape Verde", "code": "CV", "dial_code": "+238"},
  {"name": "å†ˆæ¯”äºš", "en": "Gambia", "code": "GM", "dial_code": "+220"},
  {"name": "åˆšæœ(å¸ƒ)", "en": "Congo", "code": "CG", "dial_code": "+242"},
  {"name": "åˆšæœ(é‡‘)", "en": "Democratic Republic of the Congo", "code": "CD", "dial_code": "+243"},
  {"name": "å“¥ä¼¦æ¯”äºš", "en": "Colombia", "code": "CO", "dial_code": "+57"},
  {"name": "å“¥æ–¯è¾¾é»åŠ ", "en": "Costa Rica", "code": "CR", "dial_code": "+506"},
  {"name": "æ ¼æ—çº³è¾¾", "en": "Grenada", "code": "GD", "dial_code": "+1473"},
  {"name": "æ ¼é™µå…°", "en": "Greenland", "code": "GL", "dial_code": "+299"},
  {"name": "æ ¼é²å‰äºš", "en": "Georgia", "code": "GE", "dial_code": "+995"},
  {"name": "å¤å·´", "en": "Cuba", "code": "CU", "dial_code": "+53"},
  {"name": "ç“œå¾·ç½—æ™®", "en": "Guadeloupe", "code": "GP", "dial_code": "+590"},
  {"name": "å…³å²›", "en": "Guam", "code": "GU", "dial_code": "+1671"},
  {"name": "åœ­äºšé‚£", "en": "Guyana", "code": "GY", "dial_code": "+592"},
  {"name": "å“ˆè¨å…‹æ–¯å¦", "en": "Kazakhstan", "code": "KZ", "dial_code": "+7"},
  {"name": "æµ·åœ°", "en": "Haiti", "code": "HT", "dial_code": "+509"},
  {"name": "éŸ©å›½", "en": "South Korea", "code": "KR", "dial_code": "+82"},
  {"name": "è·å…°", "en": "Netherlands", "code": "NL", "dial_code": "+31"},
  {"name": "é»‘å±±", "en": "Montenegro", "code": "ME", "dial_code": "+382"},
  {"name": "æ´ªéƒ½æ‹‰æ–¯", "en": "Honduras", "code": "HN", "dial_code": "+504"},
  {"name": "åŸºé‡Œå·´æ–¯", "en": "Kiribati", "code": "KI", "dial_code": "+686"},
  {"name": "å‰å¸ƒæ", "en": "Djibouti", "code": "DJ", "dial_code": "+253"},
  {"name": "å‰å°”å‰æ–¯æ–¯å¦", "en": "Kyrgyzstan", "code": "KG", "dial_code": "+996"},
  {"name": "å‡ å†…äºš", "en": "Guinea", "code": "GN", "dial_code": "+224"},
  {"name": "å‡ å†…äºšæ¯”ç»", "en": "Guinea-Bissau", "code": "GW", "dial_code": "+245"},
  {"name": "åŠ æ‹¿å¤§", "en": "Canada", "code": "CA", "dial_code": "+1"},
  {"name": "åŠ çº³", "en": "Ghana", "code": "GH", "dial_code": "+233"},
  {"name": "åŠ è“¬", "en": "Gabon", "code": "GA", "dial_code": "+241"},
  {"name": "æŸ¬åŸ”å¯¨", "en": "Cambodia", "code": "KH", "dial_code": "+855"},
  {"name": "æ·å…‹å…±å’Œå›½", "en": "Czech Republic", "code": "CZ", "dial_code": "+420"},
  {"name": "æ´¥å·´å¸ƒéŸ¦", "en": "Zimbabwe", "code": "ZW", "dial_code": "+263"},
  {"name": "å–€éº¦éš†", "en": "Cameroon", "code": "CM", "dial_code": "+237"},
  {"name": "å¡å¡”å°”", "en": "Qatar", "code": "QA", "dial_code": "+974"},
  {"name": "å¼€æ›¼ç¾¤å²›", "en": "Cayman Islands", "code": "KY", "dial_code": "+1345"},
  {"name": "ç§‘æ‘©ç½—", "en": "Comoros", "code": "KM", "dial_code": "+269"},
  {"name": "ç§‘ç‰¹è¿ªç“¦", "en": "Cote d'Ivoire", "code": "CI", "dial_code": "+225"},
  {"name": "ç§‘å¨ç‰¹", "en": "Kuwait", "code": "KW", "dial_code": "+965"},
  {"name": "å…‹ç½—åœ°äºš", "en": "Croatia", "code": "HR", "dial_code": "+385"},
  {"name": "è‚¯å°¼äºš", "en": "Kenya", "code": "KE", "dial_code": "+254"},
  {"name": "åº“å…‹ç¾¤å²›", "en": "Cook Islands", "code": "CK", "dial_code": "+682"},
  {"name": "æ‹‰è„±ç»´äºš", "en": "Latvia", "code": "LV", "dial_code": "+371"},
  {"name": "è±ç´¢æ‰˜", "en": "Lesotho", "code": "LS", "dial_code": "+266"},
  {"name": "è€æŒ", "en": "Laos", "code": "LA", "dial_code": "+856"},
  {"name": "é»å·´å«©", "en": "Lebanon", "code": "LB", "dial_code": "+961"},
  {"name": "ç«‹é™¶å®›", "en": "Lithuania", "code": "LT", "dial_code": "+370"},
  {"name": "åˆ©æ¯”é‡Œäºš", "en": "Liberia", "code": "LR", "dial_code": "+231"},
  {"name": "åˆ©æ¯”äºš", "en": "Libya", "code": "LY", "dial_code": "+218"},
  {"name": "åˆ—æ”¯æ•¦å£«ç™»", "en": "Liechtenstein", "code": "LI", "dial_code": "+423"},
  {"name": "ç•™å°¼æ±ª", "en": "Reunion", "code": "RE", "dial_code": "+262"},
  {"name": "å¢æ£®å ¡", "en": "Luxembourg", "code": "LU", "dial_code": "+352"},
  {"name": "å¢æ—ºè¾¾", "en": "Rwanda", "code": "RW", "dial_code": "+250"},
  {"name": "ç½—é©¬å°¼äºš", "en": "Romania", "code": "RO", "dial_code": "+40"},
  {"name": "é©¬è¾¾åŠ æ–¯åŠ ", "en": "Madagascar", "code": "MG", "dial_code": "+261"},
  {"name": "é©¬å°”ä»£å¤«", "en": "Maldives", "code": "MV", "dial_code": "+960"},
  {"name": "é©¬è€³ä»–", "en": "Malta", "code": "MT", "dial_code": "+356"},
  {"name": "é©¬æ‹‰ç»´", "en": "Malawi", "code": "MW", "dial_code": "+265"},
  {"name": "é©¬æ¥è¥¿äºš", "en": "Malaysia", "code": "MY", "dial_code": "+60"},
  {"name": "é©¬é‡Œ", "en": "Mali", "code": "ML", "dial_code": "+223"},
  {"name": "é©¬å…¶é¡¿", "en": "North Macedonia", "code": "MK", "dial_code": "+389"},
  {"name": "é©¬ç»å°”ç¾¤å²›", "en": "Marshall Islands", "code": "MH", "dial_code": "+692"},
  {"name": "é©¬æå°¼å…‹", "en": "Martinique", "code": "MQ", "dial_code": "+596"},
  {"name": "é©¬çº¦ç‰¹", "en": "Mayotte", "code": "YT", "dial_code": "+262"},
  {"name": "æ¯›é‡Œæ±‚æ–¯", "en": "Mauritius", "code": "MU", "dial_code": "+230"},
  {"name": "æ¯›é‡Œå¡”å°¼äºš", "en": "Mauritania", "code": "MR", "dial_code": "+222"},
  {"name": "ç¾å›½/åŠ æ‹¿å¤§", "en": "United States/Canada", "code": "US", "dial_code": "+1"},
  {"name": "ç¾å±è¨æ‘©äºš", "en": "American Samoa", "code": "AS", "dial_code": "+1684"},
  {"name": "è’™å¤", "en": "Mongolia", "code": "MN", "dial_code": "+976"},
  {"name": "è’™ç‰¹å¡æ‹‰ç‰¹", "en": "Montserrat", "code": "MS", "dial_code": "+1664"},
  {"name": "å­ŸåŠ æ‹‰å›½", "en": "Bangladesh", "code": "BD", "dial_code": "+880"},
  {"name": "å¯†å…‹ç½—å°¼è¥¿äºš", "en": "Micronesia", "code": "FM", "dial_code": "+691"},
  {"name": "ç¼…ç”¸", "en": "Myanmar", "code": "MM", "dial_code": "+95"},
  {"name": "æ‘©å°”å¤šç“¦", "en": "Moldova", "code": "MD", "dial_code": "+373"},
  {"name": "æ‘©æ´›å“¥", "en": "Morocco", "code": "MA", "dial_code": "+212"},
  {"name": "æ‘©çº³å“¥", "en": "Monaco", "code": "MC", "dial_code": "+377"},
  {"name": "è«æ¡‘æ¯”å…‹", "en": "Mozambique", "code": "MZ", "dial_code": "+258"},
  {"name": "å¢¨è¥¿å“¥", "en": "Mexico", "code": "MX", "dial_code": "+52"},
  {"name": "çº³ç±³æ¯”äºš", "en": "Namibia", "code": "NA", "dial_code": "+264"},
  {"name": "å—é", "en": "South Africa", "code": "ZA", "dial_code": "+27"},
  {"name": "å—è‹ä¸¹", "en": "South Sudan", "code": "SS", "dial_code": "+211"},
  {"name": "ç‘™é²", "en": "Nauru", "code": "NR", "dial_code": "+674"},
  {"name": "å°¼æ³Šå°”", "en": "Nepal", "code": "NP", "dial_code": "+977"},
  {"name": "å°¼åŠ æ‹‰ç“œ", "en": "Nicaragua", "code": "NI", "dial_code": "+505"},
  {"name": "å°¼æ—¥å°”", "en": "Niger", "code": "NE", "dial_code": "+227"},
  {"name": "å°¼æ—¥åˆ©äºš", "en": "Nigeria", "code": "NG", "dial_code": "+234"},
  {"name": "çº½åŸƒ", "en": "Niue", "code": "NU", "dial_code": "+683"},
  {"name": "æŒªå¨", "en": "Norway", "code": "NO", "dial_code": "+47"},
  {"name": "å¸•åŠ³", "en": "Palau", "code": "PW", "dial_code": "+680"},
  {"name": "è‘¡è„ç‰™", "en": "Portugal", "code": "PT", "dial_code": "+351"},
  {"name": "æ—¥æœ¬", "en": "Japan", "code": "JP", "dial_code": "+81"},
  {"name": "ç‘å…¸", "en": "Sweden", "code": "SE", "dial_code": "+46"},
  {"name": "ç‘å£«", "en": "Switzerland", "code": "CH", "dial_code": "+41"},
  {"name": "è¨å°”ç“¦å¤š", "en": "El Salvador", "code": "SV", "dial_code": "+503"},
  {"name": "è¨æ‘©äºš", "en": "Samoa", "code": "WS", "dial_code": "+685"},
  {"name": "å¡å°”ç»´äºš", "en": "Serbia", "code": "RS", "dial_code": "+381"},
  {"name": "å¡æ‹‰åˆ©æ˜‚", "en": "Sierra Leone", "code": "SL", "dial_code": "+232"},
  {"name": "å¡å†…åŠ å°”", "en": "Senegal", "code": "SN", "dial_code": "+221"},
  {"name": "å¡æµ¦è·¯æ–¯", "en": "Cyprus", "code": "CY", "dial_code": "+357"},
  {"name": "å¡èˆŒå°”", "en": "Seychelles", "code": "SC", "dial_code": "+248"},
  {"name": "æ²™ç‰¹é˜¿æ‹‰ä¼¯", "en": "Saudi Arabia", "code": "SA", "dial_code": "+966"},
  {"name": "åœ£å·´æ³°å‹’ç±³", "en": "Saint Barthelemy", "code": "BL", "dial_code": "+590"},
  {"name": "åœ£å¤šç¾å’Œæ™®æ—è¥¿æ¯”", "en": "Sao Tome and Principe", "code": "ST", "dial_code": "+239"},
  {"name": "åœ£èµ«å‹’æ‹¿", "en": "Saint Helena", "code": "SH", "dial_code": "+290"},
  {"name": "åœ£åŸºèŒ¨å’Œå°¼ç»´æ–¯", "en": "Saint Kitts and Nevis", "code": "KN", "dial_code": "+1869"},
  {"name": "åœ£å¢è¥¿äºš", "en": "Saint Lucia", "code": "LC", "dial_code": "+1758"},
  {"name": "åœ£é©¬åŠ›è¯º", "en": "San Marino", "code": "SM", "dial_code": "+378"},
  {"name": "åœ£çš®åŸƒå°”å’Œå¯†å…‹éš†", "en": "Saint Pierre and Miquelon", "code": "PM", "dial_code": "+508"},
  {"name": "åœ£æ–‡æ£®ç‰¹å’Œæ ¼æ—çº³ä¸æ–¯", "en": "Saint Vincent and the Grenadines", "code": "VC", "dial_code": "+1784"},
  {"name": "æ–¯é‡Œå…°å¡", "en": "Sri Lanka", "code": "LK", "dial_code": "+94"},
  {"name": "æ–¯æ´›ä¼å…‹", "en": "Slovakia", "code": "SK", "dial_code": "+421"},
  {"name": "æ–¯æ´›æ–‡å°¼äºš", "en": "Slovenia", "code": "SI", "dial_code": "+386"},
  {"name": "æ–¯å¨å£«å…°", "en": "Eswatini", "code": "SZ", "dial_code": "+268"},
  {"name": "è‹ä¸¹", "en": "Sudan", "code": "SD", "dial_code": "+249"},
  {"name": "è‹é‡Œå—", "en": "Suriname", "code": "SR", "dial_code": "+597"},
  {"name": "æ‰€ç½—é—¨ç¾¤å²›", "en": "Solomon Islands", "code": "SB", "dial_code": "+677"},
  {"name": "ç´¢é©¬é‡Œ", "en": "Somalia", "code": "SO", "dial_code": "+252"},
  {"name": "å¡”å‰å…‹æ–¯å¦", "en": "Tajikistan", "code": "TJ", "dial_code": "+992"},
  {"name": "æ³°å›½", "en": "Thailand", "code": "TH", "dial_code": "+66"},
  {"name": "å¦æ¡‘å°¼äºš", "en": "Tanzania", "code": "TZ", "dial_code": "+255"},
  {"name": "æ±¤åŠ ", "en": "Tonga", "code": "TO", "dial_code": "+676"},
  {"name": "ç‰¹å…‹æ–¯å’Œå‡¯ç§‘æ–¯ç¾¤å²›", "en": "Turks and Caicos Islands", "code": "TC", "dial_code": "+1649"},
  {"name": "ç‰¹ç«‹å°¼è¾¾å’Œå¤šå·´å“¥", "en": "Trinidad and Tobago", "code": "TT", "dial_code": "+1868"},
  {"name": "çªå°¼æ–¯", "en": "Tunisia", "code": "TN", "dial_code": "+216"},
  {"name": "å›¾ç“¦å¢", "en": "Tuvalu", "code": "TV", "dial_code": "+688"},
  {"name": "åœŸè€³å…¶", "en": "Turkey", "code": "TR", "dial_code": "+90"},
  {"name": "åœŸåº“æ›¼æ–¯å¦", "en": "Turkmenistan", "code": "TM", "dial_code": "+993"},
  {"name": "æ‰˜å…‹åŠ³", "en": "Tokelau", "code": "TK", "dial_code": "+690"},
  {"name": "ç“¦åˆ©æ–¯å’Œå¯Œå›¾çº³", "en": "Wallis and Futuna", "code": "WF", "dial_code": "+681"},
  {"name": "ç“¦åŠªé˜¿å›¾", "en": "Vanuatu", "code": "VU", "dial_code": "+678"},
  {"name": "å±åœ°é©¬æ‹‰", "en": "Guatemala", "code": "GT", "dial_code": "+502"},
  {"name": "å§”å†…ç‘æ‹‰", "en": "Venezuela", "code": "VE", "dial_code": "+58"},
  {"name": "æ–‡è±", "en": "Brunei", "code": "BN", "dial_code": "+673"},
  {"name": "ä¹Œå¹²è¾¾", "en": "Uganda", "code": "UG", "dial_code": "+256"},
  {"name": "ä¹Œå…‹å…°", "en": "Ukraine", "code": "UA", "dial_code": "+380"},
  {"name": "ä¹Œæ‹‰åœ­", "en": "Uruguay", "code": "UY", "dial_code": "+598"},
  {"name": "ä¹Œå…¹åˆ«å…‹æ–¯å¦", "en": "Uzbekistan", "code": "UZ", "dial_code": "+998"},
  {"name": "è¥¿ç­ç‰™", "en": "Spain", "code": "ES", "dial_code": "+34"},
  {"name": "å¸Œè…Š", "en": "Greece", "code": "GR", "dial_code": "+30"},
  {"name": "æ–°åŠ å¡", "en": "Singapore", "code": "SG", "dial_code": "+65"},
  {"name": "æ–°å–€é‡Œå¤šå°¼äºš", "en": "New Caledonia", "code": "NC", "dial_code": "+687"},
  {"name": "æ–°è¥¿å…°", "en": "New Zealand", "code": "NZ", "dial_code": "+64"},
  {"name": "åŒˆç‰™åˆ©", "en": "Hungary", "code": "HU", "dial_code": "+36"},
  {"name": "å™åˆ©äºš", "en": "Syria", "code": "SY", "dial_code": "+963"},
  {"name": "ç‰™ä¹°åŠ ", "en": "Jamaica", "code": "JM", "dial_code": "+1876"},
  {"name": "äºšç¾å°¼äºš", "en": "Armenia", "code": "AM", "dial_code": "+374"},
  {"name": "ä¹Ÿé—¨", "en": "Yemen", "code": "YE", "dial_code": "+967"},
  {"name": "ä¼Šæ‹‰å…‹", "en": "Iraq", "code": "IQ", "dial_code": "+964"},
  {"name": "ä¼Šæœ—", "en": "Iran", "code": "IR", "dial_code": "+98"},
  {"name": "ä»¥è‰²åˆ—", "en": "Israel", "code": "IL", "dial_code": "+972"},
  {"name": "æ„å¤§åˆ©", "en": "Italy", "code": "IT", "dial_code": "+39"},
  {"name": "å°åº¦", "en": "India", "code": "IN", "dial_code": "+91"},
  {"name": "å°åº¦å°¼è¥¿äºš", "en": "Indonesia", "code": "ID", "dial_code": "+62"},
  {"name": "è‹±å›½", "en": "United Kingdom", "code": "GB", "dial_code": "+44"},
  {"name": "è‹±å±ç»´å°”äº¬ç¾¤å²›", "en": "British Virgin Islands", "code": "VG", "dial_code": "+1284"},
  {"name": "çº¦æ—¦", "en": "Jordan", "code": "JO", "dial_code": "+962"},
  {"name": "è¶Šå—", "en": "Vietnam", "code": "VN", "dial_code": "+84"},
  {"name": "èµæ¯”äºš", "en": "Zambia", "code": "ZM", "dial_code": "+260"},
  {"name": "ä¹å¾—", "en": "Chad", "code": "TD", "dial_code": "+235"},
  {"name": "ç›´å¸ƒç½—é™€", "en": "Gibraltar", "code": "GI", "dial_code": "+350"},
  {"name": "æ™ºåˆ©", "en": "Chile", "code": "CL", "dial_code": "+56"},
  {"name": "ä¸­éå…±å’Œå›½", "en": "Central African Republic", "code": "CF", "dial_code": "+236"}
];

<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ç™»å½•</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <main class="container">
    <section class="card" id="login-card">
      <h1 class="title">ç™»å½•</h1>
      <div class="login-switch" role="tablist">
        <button type="button" id="mode-phone" class="switch active" aria-selected="true">æ‰‹æœºå·</button>
        <button type="button" id="mode-email" class="switch" aria-selected="false">é‚®ç®±</button>
      </div>
      <form id="login-form" novalidate>
        <div class="field phone-field">
          <label for="phone">æ‰‹æœºå·</label>
          <div class="phone-row">
            <div class="custom-select" id="custom-country-select">
              <button type="button" class="select-trigger" aria-haspopup="listbox" aria-expanded="false">
                <span class="trigger-text">+86</span>
                <span class="arrow">â–¼</span>
              </button>
              <div class="select-dropdown" role="listbox" hidden>
                <div class="search-box">
                  <input type="text" placeholder="æœç´¢å›½å®¶æˆ–åŒºå·..." class="search-input">
                </div>
                <div class="options-list"></div>
              </div>
              <input type="hidden" id="country-code" name="countryCode" value="+86">
            </div>
            <input id="phone" name="phone" type="tel" inputmode="tel" autocomplete="tel" placeholder="è¾“å…¥æ‰‹æœºå·" required>
          </div>
          <p class="error" data-for="phone"></p>
        </div>
        <div class="field email-field" hidden>
          <label for="email">é‚®ç®±</label>
          <input id="email" name="email" type="email" inputmode="email" autocomplete="username" placeholder="you@example.com">
          <p class="error" data-for="email"></p>
        </div>
        <div class="field">
          <label for="password">å¯†ç </label>
          <div class="password-input">
            <input id="password" name="password" type="password" autocomplete="current-password" placeholder="è‡³å°‘ 8 ä½å­—ç¬¦" minlength="8" required>
            <button type="button" id="toggle-password" aria-label="æ˜¾ç¤ºæˆ–éšè—å¯†ç ">ğŸ‘ï¸</button>
          </div>
          <p class="error" data-for="password"></p>
        </div>
        <div class="actions">
          <label class="remember">
            <input type="checkbox" id="remember" name="remember">
            è®°ä½æˆ‘
          </label>
          <a href="#" class="link">å¿˜è®°å¯†ç ï¼Ÿ</a>
        </div>
        <button class="submit" id="submit" type="submit" disabled>ç™»å½•</button>
      </form>
      <p class="footer">
        è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ
        <a href="#" class="link" id="go-to-register">å»æ³¨å†Œ</a>
      </p>
    </section>

    <!-- æ³¨å†Œå¡ç‰‡ -->
    <section class="card" id="register-card" hidden>
      <h1 class="title">æ³¨å†Œè´¦å·</h1>
      <form id="register-form" novalidate>
        <div class="field">
          <label for="reg-nickname">æ˜µç§°</label>
          <input id="reg-nickname" name="nickname" type="text" placeholder="è®¾ç½®ä½ çš„æ˜µç§°" required>
          <p class="error" data-for="nickname"></p>
        </div>
        
        <div class="field">
          <label for="reg-email">é‚®ç®±</label>
          <input id="reg-email" name="email" type="email" placeholder="you@example.com" required>
          <p class="error" data-for="reg-email"></p>
        </div>

        <div class="field">
          <label for="reg-code">é‚®ç®±éªŒè¯ç </label>
          <div class="verify-row">
            <input id="reg-code" name="code" type="text" placeholder="è¾“å…¥éªŒè¯ç " maxlength="6" required>
            <button type="button" class="verify-btn" id="send-code-btn">è·å–éªŒè¯ç </button>
          </div>
          <p class="error" data-for="code"></p>
        </div>

        <div class="field">
          <label for="reg-password">å¯†ç è®¾ç½®</label>
          <div class="password-input">
            <input id="reg-password" name="password" type="password" placeholder="è‡³å°‘ 8 ä½å­—ç¬¦" minlength="8" required>
            <button type="button" class="toggle-password-btn" aria-label="æ˜¾ç¤ºæˆ–éšè—å¯†ç ">ğŸ‘ï¸</button>
          </div>
          <p class="error" data-for="reg-password"></p>
        </div>

        <div class="field">
          <label for="reg-repassword">é‡å¤è¾“å…¥å¯†ç </label>
          <div class="password-input">
            <input id="reg-repassword" name="repassword" type="password" placeholder="å†æ¬¡è¾“å…¥å¯†ç " minlength="8" required>
            <button type="button" class="toggle-password-btn" aria-label="æ˜¾ç¤ºæˆ–éšè—å¯†ç ">ğŸ‘ï¸</button>
          </div>
          <p class="error" data-for="repassword"></p>
        </div>

        <div class="terms-check">
          <label>
            <input type="checkbox" id="agree-terms" required>
            <span>æ³¨å†Œå³ä»£è¡¨åŒæ„<a href="#" class="link">æœåŠ¡æ¡æ¬¾</a></span>
          </label>
        </div>

        <div class="form-actions">
          <button type="button" class="cancel-btn" id="cancel-register">å–æ¶ˆ</button>
          <button type="submit" class="submit register-submit" id="register-submit" disabled>æ³¨å†Œ</button>
        </div>
      </form>
    </section>
  </main>
  <button id="debug-users-btn" style="position:fixed;bottom:20px;left:20px;padding:8px 16px;border-radius:20px;border:1px solid rgba(255,255,255,0.2);background:rgba(0,0,0,0.5);color:#fff;font-size:12px;cursor:pointer;z-index:999;">æŸ¥çœ‹æ³¨å†Œè®°å½•</button>
  <script src="./dial_codes.js"></script>
  <script src="./app.js"></script>
</body>
</html>

:root{--bg:#0b0d12;--panel:#131824;--muted:#7b86a3;--text:#e6ebff;--primary:#4f7cff;--primary-600:#3c63d6;--danger:#ff5c5c;--ring:rgba(79,124,255,.35)}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;background:radial-gradient(1200px 800px at 20% 10%,#15203c 0%,transparent 55%),radial-gradient(900px 700px at 80% 30%,#1b2a52 0%,transparent 60%),var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
.container{min-height:100%;display:grid;place-items:center;padding:24px}
.card{width:100%;max-width:420px;background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.06);backdrop-filter:blur(8px);padding:28px;border-radius:16px;box-shadow:0 6px 30px rgba(0,0,0,.35)}
.title{margin:0 0 12px;font-size:28px;line-height:1.2}
.login-switch{display:flex;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:4px;gap:4px;margin:12px 0}
.switch{flex:1;height:36px;border:none;border-radius:8px;background:transparent;color:#cbd6ff;cursor:pointer;font-weight:600}
.switch.active{background:var(--primary);color:#fff}
.field{margin-top:14px}
.field label{display:block;font-size:14px;color:var(--muted);margin-bottom:6px}
.field input{width:100%;height:44px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.02);border-radius:10px;padding:0 12px;color:var(--text);outline:none;transition:border .15s,box-shadow .15s}
.field input::placeholder{color:#98a3c1}
.field input:focus{border-color:var(--primary);box-shadow:0 0 0 4px var(--ring)}
.password-input{display:flex;align-items:center;position:relative}
.password-input input{padding-right:44px}
#toggle-password{position:absolute;right:6px;top:50%;transform:translateY(-50%);height:32px;min-width:32px;border:none;border-radius:8px;background:transparent;color:var(--muted);cursor:pointer}
#toggle-password:hover{background:rgba(255,255,255,.06);color:var(--text)}
.error{height:18px;margin:6px 2px 0;font-size:12px;color:var(--danger)}
/* Custom Select Styles */
.custom-select{flex:0 0 auto;width:clamp(88px,28%,140px);max-width:160px;height:44px}
.select-trigger{width:100%;height:100%;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.02);border-radius:10px;padding:0 10px;color:var(--text);outline:none;display:flex;justify-content:space-between;align-items:center;cursor:pointer;white-space:nowrap;overflow:hidden;transition:border .15s,box-shadow .15s}
.select-trigger:focus{border-color:var(--primary);box-shadow:0 0 0 4px var(--ring)}
.trigger-text{overflow:hidden;text-overflow:ellipsis}
.arrow{font-size:10px;color:var(--muted);margin-left:6px}
/* Dropdown width matches the full phone-row width */
.phone-row{position:relative;display:flex;gap:8px}
.select-dropdown{position:absolute;top:100%;left:0;right:0;width:100%;background:var(--panel);border:1px solid rgba(255,255,255,.1);border-radius:10px;box-shadow:0 10px 40px rgba(0,0,0,.5);z-index:100;margin-top:6px;display:flex;flex-direction:column;max-height:320px;overflow:hidden}
.select-dropdown[hidden]{display:none}
.search-box{padding:10px;border-bottom:1px solid rgba(255,255,255,.06);background:rgba(255,255,255,.02)}
.search-input{width:100%!important;height:36px!important;margin:0!important;font-size:13px}
.options-list{flex:1;overflow-y:auto;padding:0}
.option-item{padding:8px 12px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;font-size:14px;color:var(--text)}
.option-item:hover,.option-item.focused{background:rgba(255,255,255,.06)}
.option-item.selected{background:rgba(79,124,255,.15);color:var(--primary)}
.option-code{font-weight:600;min-width:40px}
.option-name{color:#a9b3cf;margin-left:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.option-group-label{padding:8px 12px;font-size:12px;color:var(--muted);font-weight:600;background:var(--panel);position:sticky;top:0;z-index:1}

.phone-row input{flex:1;min-width:0}
.email-field[hidden]{display:none}
.phone-field[hidden]{display:none}
.actions{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
.remember{font-size:14px;color:#a9b3cf}
.link{color:var(--primary);text-decoration:none}
.link:hover{text-decoration:underline}
.submit{margin-top:18px;width:100%;height:46px;border:none;border-radius:12px;background:var(--primary);color:#fff;font-weight:600;cursor:pointer;transition:background .15s,opacity .15s}
.submit[disabled]{opacity:.6;cursor:not-allowed}
.submit:not([disabled]):hover{background:var(--primary-600)}
/* Register Page Styles */
.verify-row{display:flex;gap:8px}
.verify-row input{flex:1;min-width:0}
.verify-btn{flex:0 0 auto;width:100px;height:44px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);border-radius:10px;color:var(--text);font-size:13px;cursor:pointer;transition:background .15s}
.verify-btn:not([disabled]):hover{background:rgba(255,255,255,.1)}
.verify-btn[disabled]{opacity:.5;cursor:not-allowed}
.toggle-password-btn{position:absolute;right:6px;top:50%;transform:translateY(-50%);height:32px;min-width:32px;border:none;border-radius:8px;background:transparent;color:var(--muted);cursor:pointer}
.toggle-password-btn:hover{background:rgba(255,255,255,.06);color:var(--text)}
.terms-check{margin-top:16px;font-size:14px;color:var(--muted)}
.terms-check label{display:flex;align-items:center;gap:8px;cursor:pointer}
.terms-check input{width:16px;height:16px;margin:0;cursor:pointer}
.form-actions{display:flex;gap:12px;margin-top:24px}
.cancel-btn{flex:1;height:46px;border:1px solid rgba(255,255,255,.12);border-radius:12px;background:transparent;color:var(--text);font-weight:600;cursor:pointer;transition:background .15s}
.cancel-btn:hover{background:rgba(255,255,255,.06)}
.register-submit{margin-top:0!important;flex:2}
.card[hidden]{display:none}

.footer{margin-top:16px;text-align:center;color:#a9b3cf;font-size:14px}
@media (max-width:420px){.card{padding:22px}.title{font-size:24px}}

{
  "version": 2,
  "name": "login-register-demo",
  "cleanUrls": true,
  "trailingSlash": false,
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        },
        {
          "key": "X-Frame-Options",
          "value": "DENY"
        },
        {
          "key": "X-XSS-Protection",
          "value": "1; mode=block"
        }
      ]
    },
    {
      "source": "/assets/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    }
  ]
}
